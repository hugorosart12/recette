<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recettes - Sauces</title>
<style>
body { font-family: Arial; text-align: center; padding:20px; background:#fafafa; }
form { margin-bottom: 20px; }
input { padding: 8px; margin: 5px; }
button { padding: 8px 12px; margin: 5px; cursor:pointer; }
ul { list-style:none; padding:0; max-width:500px; margin:auto; }
li { margin:10px 0; display:flex; justify-content:space-between; align-items:center; }
a { color:#007BFF; text-decoration:none; margin-right:10px; }
</style>
</head>
<body>
<h1>Recettes - Sauces</h1>
<a href="index.html">â¬… Retour</a>

<form id="linkForm">
<input type="text" id="title" placeholder="Nom de la recette" required>
<input type="url" id="url" placeholder="Lien" required>
<button type="submit">Ajouter</button>
</form>

<ul id="linkList"></ul>

<script>
const sheetAPI = "https://script.google.com/macros/s/AKfycbzpDs5GH1KnPIrdJosoLGgdFvUp1MUIiTLEPsWqal3g4ewwniM58cQhY4X2qr4tAWkH/exec";
const category = "sauce";
const linkList = document.getElementById('linkList');
const form = document.getElementById('linkForm');

// Charger les liens
async function loadLinks(){
  const res = await fetch(sheetAPI);
  const data = await res.json();
  linkList.innerHTML = '';
  data.forEach(item=>{
    if(item.category === category){
      const li = document.createElement('li');
      li.innerHTML = `<a href="${item.url}" target="_blank">${item.title}</a>`;
      linkList.appendChild(li);
    }
  });
}

// Ajouter un lien
form.addEventListener('submit', async e=>{
  e.preventDefault();
  const title = document.getElementById('title').value.trim();
  const url = document.getElementById('url').value.trim();
  if(title && url){
    await fetch(sheetAPI, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({category, title, url})
    });
    form.reset();
    loadLinks();
  }
});

loadLinks();
</script>
</body>
</html>
